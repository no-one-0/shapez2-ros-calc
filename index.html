<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Shapez2 ROS calcu</title>
<style>
input:valid {
  background-color: palegreen;
}
input:invalid {
  background-color: lightpink;
}
input {
  width: 80px;
}
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}
</style>
</head>
<body onload="compute()">
<script>

let base64File = "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";
const typedArray = Uint8Array.from(atob(base64File), c => c.charCodeAt(0));
const wasmModule = new WebAssembly.Module(typedArray);
const importObject = {};
const wasmInstance = new WebAssembly.Instance(wasmModule, importObject);
const spz2_init = wasmInstance.exports.init;
const spz2_avgTime = wasmInstance.exports.avgTime;

spz2_init();

function compute_ROS(ros, ok, ss)
{
	for (i = 1; i < 5; i++)
	{
		var e = document.getElementById("r"+ros+"t"+i);
		if (ok)
			e.innerText = spz2_avgTime(ros, i, ss[0], ss[1], ss[2], ss[3]).toFixed(4);
		else
			e.innerText = "";
	}
}

function compute()
{
	var ok = 1;
	var ss = [0, 0, 0, 0];
	for (i = 0; i < 4; i++)
	{
		var e = document.getElementById("s"+i);
		ok &= e.validity.valid;
		ss[i] = e.value;
	}
	compute_ROS(0, ok, ss);
	compute_ROS(1, ok, ss);
}

</script>

<form>
<h4>Supplied belts per layer:</h4>
<input type="text" id="s0" placeholder="floating point > 0" pattern="\d+(\.\d+)?" required="1" value="2.5" oninput="compute()" />
<label for="s0">Circle (30%):</label>
<br />
<input type="text" id="s1" placeholder="floating point > 0" pattern="\d+(\.\d+)?" required="1" value="2.5" oninput="compute()" />
<label for="s1">Rectangle (30%):</label>
<br />
<input type="text" id="s2" placeholder="floating point > 0" pattern="\d+(\.\d+)?" required="1" value="2.5" oninput="compute()" />
<label for="s2">Star (30%):</label>
<br />
<input type="text" id="s3" placeholder="floating point > 0" pattern="\d+(\.\d+)?" required="1" value="1.2" oninput="compute()" />
<label for="s3">Wiamond (10%):</label>
</form>
<p>(The probability of a quadrant being Wiamond is 10%.)</p>

<table>
<caption>
<h4>Average times for making the amount of 4 full belts</h4>
</caption>
<thead>
<tr><th></th><th>1 Layer</th><th>2 Layers</th><th>3 Layers</th><th>4 Layers</th>
</tr>
</thead>
<tbody>
<tr><th>ROS#0</th><td id="r0t1"></td><td id="r0t2"></td><td id="r0t3"></td><td id="r0t4"></td></tr>
<tr><th>ROS#1</th><td id="r1t1"></td><td id="r1t2"></td><td id="r1t3"></td><td id="r1t4"></td></tr>
</tr>
</tbody>
</table>
<p>(Every layer has gap(s) in ROS#1.)</p>
<p>Calculates averages for the ROS0 and the ROS1 shapes without pins.</p>
<p>Computes the average times required for making the same amount as 4 full belts output would give.</p>
<p>The result is 1 if the given supply is enough to produce 4 full belts of any ROS shape.</p>
<p>ROS shapes with pins are not taken into account, they would only improve the results because of the destroyed shape parts in excess layers.</p>
<p>Assumptions:</p>
<ul>
<li>no other bottleneck</li>
<li>supply is shared between layers</li>
<li>every shape part is used up (nothing goes to trash bin)</li>
</ul>

</body>
</html>
